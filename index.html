<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<script>loadDB()</script>
<head>
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-title" content="IPA Archive">
    <link rel="apple-touch-icon" href="./apple-touch-icon.png">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="style.css" media="screen" type="text/css">
    <script src="script.js" type="text/javascript" defer></script>
    <title>IPA Archive</title>
    <meta name="Keywords" content="ipa, archive, ios apps, ipa download">
    <meta name="description" content="IPA archive for iOS applications">
    <style>
        body {
            padding-top: 20px;
        }
        #content {
            margin-top: 20px;
        }
    </style>
</head>

<body>
	<button style="float: right; margin: 0 16px" onclick="randomIPA()">Random</button>
	<h1>IPA Archive</h1>
	<form onsubmit="event.preventDefault(); searchIPA(); return false;" autocomplete="off">
		<input id="page" hidden>
		<input id="minid" hidden>
		<label for="search">Search: <input id="search" placeholder="Search"></label>
		<label for="bundleid">BundleId: <input id="bundleid" placeholder="com.gameloft."></label>
		<label for="unique">Unique: <input id="unique" type="checkbox" checked></label>
		<label for="minos">min OS: <input id="minos" placeholder="1.0"></label>
		<label for="maxos">max OS: <input id="maxos" placeholder="5.1.1"></label>
		<label for="device">Device: <select id="device">
				<option value="">Any</option>
				<option value="1">iPhone</option>
				<option value="2">iPad</option>
				<option value="3">TV</option>
				<option value="4">Watch</option>
			</select></label>
		<button type="submit">Search</button>
	</form>

	<div id="content">JavaScript disabled?</div>

	<div id="templates" hidden>
		<div class="entry full">
			<div>
				<img src="$IMG">
				<button onclick="installIPA($IDX)">Install</button>
			</div>
			<div class="info">
				<h4>$TITLE</h4>
				<div>BundleId: $BUNDLEID</div>
				<div>Version: v$VERSION â€“ $SIZE</div>
				<div>Device: $PLATFORM</div>
				<div>Minimum OS: $MINOS</div>
				<div>Link: <a href="$URL" rel="noopener noreferrer nofollow">$URLNAME</a></div>
			</div>
		</div>
		<div class="entry short">
			<div><img src="$IMG"></div>
			<div class="info">
				<h4>$TITLE</h4>
				<div>BundleId: $BUNDLEID</div>
				<div>Device: $PLATFORM</div>
				<div>Minimum OS: $MINOS</div>
				<div><a onclick="searchBundle($IDX)">Show all</a></div>
			</div>
		</div>
		<div class="itunes">
			<h4>iTunes Info:</h4>
			<div>Genre: $GENRES</div>
			<div>Rating: $RATING</div>
			<div>Advisory: $ADVISORY</div>
			<br>
			<div>Current Version: <b>$VERSION</b> (last update: $DATE)</div>
			<div>Price: $PRICE</div>
			<div>Link: <a href="$URL" rel="noopener noreferrer nofollow">iTunes</a></div>
			<div>$IMG</div>
			<p>$DESCRIPTION</p>
		</div>
		<a class="screenshot" href="$REF" target="_blank"><img src="$URL" crossorigin="anonymous"
				referrerpolicy="no-referrer"></a>
		<div class="randomAction">
			Actions:
			<button onclick="searchBundle($IDX, '&random=$IDX')">Show all versions</button>
			<button onclick="randomIPA()">Next Random</button>
		</div>
		<div class="no-itunes">
			<p>iTunes search disabled. No plist server configured.</p>
			<a onclick="installIPA()">Configure now</a>
		</div>
	</div>

	<div id="overlay" hidden>
		<div id="installMsg">
			<h3>Install on device</h3>
			<p>
				Unfortunatelly, this function is not possible with static HTML+JS.
				You must provided a plist generator URL.
				See <a href="Readme.md" target="_blank">Readme</a> file for further instructions on how to set up such a
				service.
			</p>
			<form onsubmit="event.preventDefault(); setPlistGen(); return false;" autocomplete="off">
				<label for="plistServer">Generator URL:</label>
				<input id="plistServer" placeholder="http://192.168.0.1/">
				<button type="submit">Save</button>
				<button type="button" onclick="document.getElementById('overlay').hidden=true">Abort</button>
			</form>
		</div>
	</div>

	<script>loadDB()</script>
</body>

</html>
